\section{Hardware Development}
\label{sec:hardware_development}

\subsection{Common Hardware Packages and Components}

The controller board integrates several key hardware packages to realize its functionality. For the \ac{DMX} interface, standard \ac{RJ45} connectors are utilized for physical connectivity. The electrical interface is managed by an SN75176 differential bus transceiver \ac{IC}, which is a common choice for \ac{RS485} communication. To ensure compatibility between the 5V levels of the transceiver and the 3.3V logic level of the \ac{MCU}, a voltage divider circuit is implemented for the data lines. \\

Power regulation is achieved using a switching buck converter, a type of \ac{DCDC} converter, to efficiently step down the input voltage to a stable 5V for the system components. The central processing unit selected for this design is the Seeedstudio XIAO ESP32-C3 \ac{MCU}, which provides the necessary computational power, memory, and peripheral interfaces, including \ac{WLAN} connectivity. User input is primarily handled by a rotary encoder, allowing for menu navigation and parameter adjustment. Visual feedback for the \ac{HMI} is provided by an \ac{OLED} display with a resolution of 128x32 pixels, which communicates with the \ac{MCU} via the \ac{I2C} protocol.

\subsection{Hardware Variations for Light Tube}
The project includes different hardware iterations for the tube light fixtures, primarily differing in their \ac{LED} control methodology:

\begin{description}[style=nextline]
	\item[Light Tube V2] This version employs \ac{MOSFET}s to drive the \ac{RGB} \ac{LED}s of the entire tube. Control is achieved using \ac{PWM} signals for each color channel (Red, Green, and Blue), allowing the overall color and intensity of the tube to be adjusted as a single unit.
	\item[Light Tube V3] This iteration advances to addressable \ac{LED} segments. It utilizes a serial communication protocol, similar to that used by the WS2811 \ac{IC}, to set the color of individual \ac{LED} segments within the tube. This enables more complex lighting effects and patterns by controlling different parts of the tube independently.
\end{description}

\subsection{Hardware Variation for Panel}
The Light Panel variant incorporates several distinct design features tailored to its specific application and components. Thermal management for the densely packed \ac{LED}s and associated electronics is addressed by an 80mm cooling fan mounted on the rear of the panel. This fan's speed is regulated via a \ac{PWM} signal from the main controller, allowing for dynamic adjustment of airflow based on thermal load, thereby optimizing cooling performance while minimizing acoustic noise. \\

For distributing lighting information, the panel employs a hierarchical control system. The \ac{MCU} communicates lighting commands to five independent section control units using the \ac{I2C} protocol. These section control units are built around an ATtiny402 \ac{MCU}. Each of these dedicated section controllers is then responsible for driving a bank of 75 WS2815 \ac{RGB} \ac{LED} \ac{IC}s. Within each section, all 75 \ac{LED}s display the same color, as dictated by their respective section controller, allowing for five distinct color zones across the panel. \\

A notable characteristic of this panel variant is its power system. It operates on a 12 Volt input voltage, distinguishing it from other devices in the project that use 24 Volts. This 12V supply is particularly suitable as the WS2815 \ac{LED} \ac{IC}s are designed to be directly powered from a 12V source. This simplifies the power distribution to the \ac{LED}s, potentially reducing the need for additional voltage regulation steps for the \ac{LED} drivers themselves, although the section control units and main \ac{MCU} would still require appropriate voltage levels (e.g., 3.3V or 5V) derived from this main 12V input.

\subsection{Hardware Variation for Spotlight}
This spotlight device incorporates several key design elements. Effective thermal management is achieved through the use of a dedicated aluminum heatsink, which is actively cooled by an attached fan; this is crucial for dissipating the heat generated by the high-power light source. For the 12V fan a separate power rail is used. The fan is controlled via a \ac{PWM} signal depending on the intensity of the light output.\\

The electronics are housed on a custom \ac{PCB}, specifically designed to conform to the physical dimensions and layout requirements of the fixture. The primary light source is a multi-color \ac{RGB} \ac{COB} \ac{LED} chip, which provides a dense array of \ac{LED}s for bright and uniform color output. Each color channel (Red, Green, and Blue) of this \ac{COB} chip is individually controlled via \ac{PWM} signals, allowing for precise color mixing and intensity adjustment. To shape and direct the light output, the fixture is equipped with a lens designed to focus the beam to a 60Â° angle, providing a defined area of illumination.

\subsection{Schematic Design}
The initial phase of the \ac{PCB} design involves the detailed creation of schematics using specialized \ac{EDA} software. For this project, schematics have been developed using Autodesk Fusion 360, which integrated the capabilities of the formerly separate Autodesk Eagle software, alongside KiCad version 8. A long-term decision has been made to transition future design work predominantly to KiCad 8, leveraging its open-source nature and comprehensive feature set. \\

Within these software environments, the process includes the careful selection and placement of correct component footprints, which accurately represent the physical dimensions and pin configurations of the parts to be used. If standard footprints are unavailable or unsuitable, custom ones are created. Following this, all necessary logical electrical connections between the components are meticulously drawn, defining the complete circuit topology and its intended behavior. \\

A crucial aspect of the design workflow is the reliance on prior experimental validation. The schematics are not merely theoretical constructs but are developed based on the outcomes of thorough testing and experimentation conducted on breadboard prototypes. This practical approach ensures that the fundamental functions of the circuit and the interplay of its components are proven to be working correctly in a tangible, albeit less permanent, setup. By verifying the design's efficacy at the breadboard stage, the risk of errors in the final \ac{PCB} is significantly mitigated, thereby increasing the confidence in ordering and fabricating \ac{PCB}s that will function as intended from the outset.

\subsection{PCB Design and Fabrication}
The design and fabrication of the \ac{PCB}s for this project adhere to several critical considerations to ensure functionality, reliability, and seamless integration within the overall mechanical design. The physical dimensions of each \ac{PCB} are meticulously planned to fit within the specific mechanical parameters and size constraints dictated by the intended enclosure or mounting arrangement. \\

Careful attention is given to the layout of conductive pathways, with adequate track widths employed for both power and signal lines. Power traces are dimensioned to handle the expected current loads without significant voltage drop or excessive heat generation, while signal traces are routed to maintain signal integrity and minimize noise coupling. \\

Components are strategically placed on the board in logical groups, taking into account their functional relationships as well as the placement of input and output connectors to facilitate straightforward wiring and interaction. Furthermore, informative labels and markings are included on the \ac{PCB} silkscreen layer to display crucial information, such as component designators, polarity indicators, or operational notes like the on/off position for a termination resistor switch. To ensure robust mechanical assembly, mounting holes are strategically placed to align with the mechanical design of the enclosure or support structure. \\

All custom \ac{PCB}s utilized throughout this project are fabricated by the external manufacturing service, JLCPCB. This approach allows for access to professional-grade \ac{PCB} production. A specific consideration applies to the \ac{LED} panel variant: due to the high density of surface-mount \ac{LED}s, the WS2815 \ac{LED} components for these panels are assembled onto the \ac{PCB}s directly by JLCPCB as part of their component assembly service. This outsourcing of the \ac{LED} placement significantly saves time for the assembly process for this particular component-dense design. Further details regarding the overall component assembly process for all boards are provided in a subsequent chapter \textit{\ref{sec:component_assembly} \nameref{sec:component_assembly}}.

\subsection{Component Selection and Justification}

\subsection{Component Assembly}\label{sec:component_assembly}
The assembly of the \ac{PCB}s involves distinct stages for \ac{SMD} and \ac{THT} components, employing manual and semi-automated techniques to ensure reliable solder joints and functional boards. \\

\begin{description}[style=nextline]
	\item[\ac{SMD}] The \ac{SMD} assembly process commences with the application of solder paste to the pads on the \ac{PCB}. A stencil, precisely aligned with the \ac{PCB} footprint, is used to ensure accurate deposition of the paste. To achieve consistent solder paste distribution and ensure repeatability across multiple boards, a temporary jig or contraption is constructed. This setup, typically involving securing the stencil with tape and using other \ac{PCB}s as shims, guarantees the correct height and alignment for an even application. Following solder paste application, the individual \ac{SMD} components are meticulously placed onto their designated positions on the \ac{PCB} using a pair of tweezers. Once all components are placed, the entire assembly is subjected to a reflow soldering process using a hot plate. The controlled heating profile of the hot plate melts the solder paste, allowing it to flow and form robust electrical and mechanical connections between the components and the \ac{PCB}. After the board has cooled, a cleaning step is performed using \ac{IPA} and a brush to remove any flux residues or solder debris, ensuring optimal electrical performance and a professional finish.
	
	\item[\ac{THT}] Subsequent to the completion of the \ac{SMD} assembly and reflow process, the \ac{THT} components are manually soldered to the \ac{PCB}. This step is generally performed for all \ac{THT} parts with the notable exception of the \ac{MCU}, which is handled with additional precaution. Before the \ac{MCU} is installed, a critical verification step involves testing the output of the onboard 5V buck \ac{DCDC} converter. The voltage is carefully measured using a multimeter to confirm it is within the correct operational tolerance. Only if this voltage measurement is confirmed to be fine is the \ac{MCU} then soldered onto the board. This sequenced approach, prioritizing the verification of power rails before installing sensitive components like the \ac{MCU}, minimizes the risk of damage due to power supply faults.
\end{description}
